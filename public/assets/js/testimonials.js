document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("testimonial-container-new"),t=document.getElementById("scroll-left-new"),n=document.getElementById("scroll-right-new"),s=document.getElementById("testimonial-dots");if(!(e&&t&&n&&s))return;const o=Array.from(e.children).filter(e=>"ARTICLE"===e.tagName);let r=[];const l=()=>{s.innerHTML="",r=[],o.forEach((t,n)=>{const o=document.createElement("button");o.className="w-3 h-3 rounded-full bg-gray-300 hover:bg-gray-400 transition-all duration-300",o.setAttribute("aria-label",`Go to testimonial ${n+1}`),o.addEventListener("click",()=>{const s=t.offsetWidth;e.scrollTo({left:n*s+n*parseInt(getComputedStyle(t).marginRight)*2,behavior:"smooth"})}),s.appendChild(o),r.push(o)})},i=()=>{const s=e.scrollWidth-e.clientWidth;t.disabled=e.scrollLeft<=1,n.disabled=e.scrollLeft>=s-1,(()=>{const t=o[0].offsetWidth,n=e.scrollLeft,s=Math.round(n/t);r.forEach((e,t)=>{t===s?(e.classList.remove("bg-gray-300"),e.classList.add("bg-blue-500","scale-125")):(e.classList.remove("bg-blue-500","scale-125"),e.classList.add("bg-gray-300"))})})()},d=t=>{const n=o[0];if(!n)return;const s=n.offsetWidth;e.scrollBy({left:t*s,behavior:"smooth"})};l(),t.addEventListener("click",()=>d(-1)),n.addEventListener("click",()=>d(1));const c=new IntersectionObserver(t=>{t[0].isIntersecting?(i(),e.addEventListener("scroll",i,{passive:!0}),window.addEventListener("resize",()=>{l(),i()})):(e.removeEventListener("scroll",i),window.removeEventListener("resize",i))},{threshold:.1});e&&c.observe(e)});